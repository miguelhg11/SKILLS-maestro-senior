{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Search Filter Configuration",
  "description": "Configuration schema for search and filter interfaces",
  "type": "object",
  "properties": {
    "searchConfig": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": true,
          "description": "Enable search functionality"
        },
        "debounceMs": {
          "type": "integer",
          "minimum": 0,
          "maximum": 2000,
          "default": 300,
          "description": "Debounce delay in milliseconds"
        },
        "minChars": {
          "type": "integer",
          "minimum": 0,
          "maximum": 10,
          "default": 2,
          "description": "Minimum characters before triggering search"
        },
        "maxLength": {
          "type": "integer",
          "minimum": 10,
          "maximum": 500,
          "default": 200,
          "description": "Maximum search query length"
        },
        "placeholder": {
          "type": "string",
          "default": "Search...",
          "description": "Search input placeholder text"
        },
        "searchFields": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": ["title", "description", "tags"],
          "description": "Fields to search in"
        },
        "enableAutocomplete": {
          "type": "boolean",
          "default": true,
          "description": "Enable autocomplete suggestions"
        },
        "autocompleteLimit": {
          "type": "integer",
          "minimum": 1,
          "maximum": 50,
          "default": 10,
          "description": "Maximum autocomplete suggestions"
        }
      }
    },
    "filters": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/filterDefinition"
      },
      "description": "List of available filters"
    },
    "facets": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": true,
          "description": "Enable faceted search"
        },
        "showCounts": {
          "type": "boolean",
          "default": true,
          "description": "Show result counts for each facet"
        },
        "dynamicCounts": {
          "type": "boolean",
          "default": true,
          "description": "Update counts dynamically as filters change"
        },
        "collapsible": {
          "type": "boolean",
          "default": true,
          "description": "Allow facet sections to be collapsed"
        }
      }
    },
    "sorting": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": true,
          "description": "Enable sorting options"
        },
        "defaultSort": {
          "type": "string",
          "default": "relevance",
          "description": "Default sort order"
        },
        "options": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/sortOption"
          },
          "description": "Available sort options"
        }
      }
    },
    "pagination": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": true,
          "description": "Enable pagination"
        },
        "defaultPerPage": {
          "type": "integer",
          "minimum": 1,
          "maximum": 100,
          "default": 20,
          "description": "Default results per page"
        },
        "perPageOptions": {
          "type": "array",
          "items": {
            "type": "integer"
          },
          "default": [10, 20, 50, 100],
          "description": "Available per-page options"
        },
        "maxPages": {
          "type": "integer",
          "minimum": 1,
          "maximum": 1000,
          "default": 100,
          "description": "Maximum number of pages"
        },
        "showInfo": {
          "type": "boolean",
          "default": true,
          "description": "Show pagination info (e.g., 'Showing 1-20 of 100')"
        }
      }
    },
    "ui": {
      "type": "object",
      "properties": {
        "layout": {
          "type": "string",
          "enum": ["sidebar", "top", "modal", "drawer"],
          "default": "sidebar",
          "description": "Filter panel layout"
        },
        "mobileLayout": {
          "type": "string",
          "enum": ["drawer", "modal", "accordion"],
          "default": "drawer",
          "description": "Mobile filter layout"
        },
        "showActiveFilters": {
          "type": "boolean",
          "default": true,
          "description": "Display active filter chips"
        },
        "showClearAll": {
          "type": "boolean",
          "default": true,
          "description": "Show 'Clear all' button"
        },
        "animations": {
          "type": "boolean",
          "default": true,
          "description": "Enable UI animations"
        },
        "theme": {
          "type": "string",
          "enum": ["light", "dark", "auto"],
          "default": "auto",
          "description": "UI theme"
        }
      }
    },
    "performance": {
      "type": "object",
      "properties": {
        "caching": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": true,
              "description": "Enable result caching"
            },
            "ttl": {
              "type": "integer",
              "minimum": 0,
              "maximum": 3600,
              "default": 300,
              "description": "Cache TTL in seconds"
            },
            "maxSize": {
              "type": "integer",
              "minimum": 0,
              "maximum": 1000,
              "default": 100,
              "description": "Maximum cache entries"
            }
          }
        },
        "virtualization": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false,
              "description": "Enable virtual scrolling for large result sets"
            },
            "threshold": {
              "type": "integer",
              "minimum": 100,
              "maximum": 10000,
              "default": 1000,
              "description": "Item count threshold for virtualization"
            }
          }
        },
        "lazyLoading": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": true,
              "description": "Enable lazy loading of results"
            },
            "imageLoading": {
              "type": "string",
              "enum": ["eager", "lazy", "auto"],
              "default": "lazy",
              "description": "Image loading strategy"
            }
          }
        }
      }
    },
    "api": {
      "type": "object",
      "properties": {
        "searchEndpoint": {
          "type": "string",
          "format": "uri",
          "description": "Search API endpoint"
        },
        "autocompleteEndpoint": {
          "type": "string",
          "format": "uri",
          "description": "Autocomplete API endpoint"
        },
        "method": {
          "type": "string",
          "enum": ["GET", "POST"],
          "default": "POST",
          "description": "HTTP method for search requests"
        },
        "headers": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          },
          "description": "Additional headers for API requests"
        },
        "timeout": {
          "type": "integer",
          "minimum": 1000,
          "maximum": 60000,
          "default": 10000,
          "description": "API request timeout in milliseconds"
        },
        "retries": {
          "type": "integer",
          "minimum": 0,
          "maximum": 5,
          "default": 3,
          "description": "Number of retry attempts on failure"
        }
      },
      "required": ["searchEndpoint"]
    }
  },
  "definitions": {
    "filterDefinition": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique filter identifier"
        },
        "label": {
          "type": "string",
          "description": "Display label for the filter"
        },
        "type": {
          "type": "string",
          "enum": ["checkbox", "radio", "range", "dropdown", "date", "boolean"],
          "description": "Filter UI type"
        },
        "field": {
          "type": "string",
          "description": "Field name in data/API"
        },
        "dataType": {
          "type": "string",
          "enum": ["string", "number", "boolean", "date"],
          "description": "Data type of the field"
        },
        "options": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "value": {
                "type": ["string", "number", "boolean"]
              },
              "label": {
                "type": "string"
              },
              "count": {
                "type": "integer",
                "minimum": 0
              }
            },
            "required": ["value", "label"]
          },
          "description": "Predefined options for select-type filters"
        },
        "range": {
          "type": "object",
          "properties": {
            "min": {
              "type": "number"
            },
            "max": {
              "type": "number"
            },
            "step": {
              "type": "number"
            },
            "prefix": {
              "type": "string"
            },
            "suffix": {
              "type": "string"
            }
          },
          "description": "Configuration for range filters"
        },
        "multiple": {
          "type": "boolean",
          "default": true,
          "description": "Allow multiple selections"
        },
        "required": {
          "type": "boolean",
          "default": false,
          "description": "Is this filter required"
        },
        "defaultValue": {
          "description": "Default filter value"
        },
        "placeholder": {
          "type": "string",
          "description": "Placeholder text for input filters"
        },
        "validation": {
          "type": "object",
          "properties": {
            "pattern": {
              "type": "string",
              "description": "Regex pattern for validation"
            },
            "min": {
              "type": "number",
              "description": "Minimum value"
            },
            "max": {
              "type": "number",
              "description": "Maximum value"
            },
            "minLength": {
              "type": "integer",
              "description": "Minimum string length"
            },
            "maxLength": {
              "type": "integer",
              "description": "Maximum string length"
            }
          }
        }
      },
      "required": ["id", "label", "type", "field"]
    },
    "sortOption": {
      "type": "object",
      "properties": {
        "value": {
          "type": "string",
          "description": "Sort value sent to API"
        },
        "label": {
          "type": "string",
          "description": "Display label"
        },
        "field": {
          "type": "string",
          "description": "Field to sort by"
        },
        "order": {
          "type": "string",
          "enum": ["asc", "desc"],
          "description": "Sort order"
        }
      },
      "required": ["value", "label", "field", "order"]
    }
  },
  "required": ["api"]
}